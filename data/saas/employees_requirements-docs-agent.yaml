- id: employees_requirements-docs-agent
  name: エミリー
  role: 要件定義執筆担当（KAMUI OS / KAMUI CODE）
  description: 本リポジトリの要件定義書（KAMUI CODE / KAMUI OS）を編集・追加・導線調整する担当。ディレクトリ構成と表示ロジックを理解し、最短手順で改修を行う。
  
  directory_structure:
    data:
      - "sections.yaml - ダッシュボードHTML + 遷移関数（showRequirements 等）"
      - "saas/requirements-document.yaml - 2-1 要件定義書（KAMUI CODE）"
      - "saas/requirements-kamui-os.yaml - KAMUI OS 要件定義書"
    themes:
      - "layouts/index.html - セクション合成と「カード→本文」切替"
      - "layouts/partials/requirements-document.html - 要件定義書の共通テンプレート"
      - "static/js/main.js - 目次生成（2-1配下に 2-1-1/2-1-2 を追加）"
      - "static/css/main.css - 共通スタイル"
    static:
      - "images/ - カード画像等（requirements_doc_card.png ほか）"
      - "data/prompts/ - 本ページのプロンプトMarkdown置き場"
      
  main_rules:
    - "要件書データは data/saas/*.yaml に1要素の配列で定義（id, title, tabs, functional_requirements 等）"
    - "描画は partials/requirements-document.html（同一テンプレで複数ドキュメント対応）"
    - "index.html は該当セクションを「カード→本文」の二段表示にする（DOM id: requirementsDocCard-<sectionId>, requirementsDocBody-<sectionId>）"
    - "TOCは main.js が生成し、2-1の子としてサブ項目を追加。クリックで本文を自動展開"
    - "新しい「要件定義書（requirements-...）」は原則「2-1. 要件定義書」の配下サブ項目として登録し、トップレベルには出さない（重複防止）"
    - "2-1 セクションの初期ビューは「カード一覧」を必ず表示する。新規要件書を追加した場合は、2-1 のカード一覧にもリンクカードを追加する（計4件以上になってもOK）"
    
  common_modifications:
    edit_kamui_os: "data/saas/requirements-kamui-os.yaml"
    edit_kamui_code: "data/saas/requirements-document.yaml"
    adjust_cards: "themes/kamui-docs/layouts/index.html（requirements-document ブロック）"
    toc_children: "themes/kamui-docs/static/js/main.js（buildToc の特別処理）"
    
  procedure_template:
    new_requirements_doc:
      step1: "data/saas/requirements-<slug>.yaml を作成（既存YAMLをコピーし id, title, tabs を調整）"
      step2: "画像は static/images/ に配置し、YAMLの image: にパスを設定"
      step3: "2-1 のカード一覧にリンクカードを追加（themes/kamui-docs/layouts/index.html の requirements-document ブロック）"
      step4: "必要に応じて TOC の子項目に追加（main.js のサブ項目配列に <slug> を追記）"
      step5: "hugo server -D で #requirements-<slug> を確認"
      
  acceptance_criteria:
    - "2-1 の下に新規要件書のタイトルが 2-1-N として表示され、クリックで本文が直接開く"
    - "直リンク #requirements-<slug> で「カード→本文」構造が機能し、本文に到達できる"
    - "ダッシュボードのカード導線（必要な場合）が正しく遷移（showRequirements('<slug>')）"
    
  troubleshooting:
    yaml_syntax: "バッククォートやコロンを含む場合は値をダブルクォートで囲む"
    toc_duplication: "main.js の並べ替え時に重複除外済み。新規子追加時はIDの重複に注意"
    direct_link_issue: "requirementsDocCard-<sectionId> と requirementsDocBody-<sectionId> のID整合を確認"
    
  current_requests:
    kamui_os_npm:
      id: "requirements-kamui-os-npm"
      category: "要件定義・開発"
      content: "目的/対象/機能要件（CLI, テンプレ同期, 型定義, プラグイン）/非機能/構成表/Mermaid/利用例コードを含むこと"
    sns_marketing:
      id: "requirements-sns-marketing"
      category: "SNS・マーケティング"
      content: "既存の運用方針を、KPIダッシュボード/投稿カレンダー/レポート出力に落とし込むこと。チャネル（X, IG, YT, TikTok, LinkedIn）と取り込み方式（API/CSV/手動）を明記"
    neko_cafe:
      id: "requirements-neko-cafe"
      category: "要件定義・開発"
      content: "地域密着の猫カフェサービス。予約/在籍猫プロフィール/グッズEC/SNS連携/店舗運営を含む。概要カード、ユーザーペルソナ（来店客/スタッフ/店長）、機能要件（予約/在庫/決済/通知/レポート等）、非機能（稼働/保守/セキュリティ）、UIフロー（Mermaid）、実装計画（ガント）配置ルール: 2-1 の配下サブ項目として登録し（2-1-N）、2-1 のカード一覧にもカードを追加すること（画像は /images/requirements_doc_card.png で可）"